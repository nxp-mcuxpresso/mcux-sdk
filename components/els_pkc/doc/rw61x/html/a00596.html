<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MCUX CLNS: mcuxClPsaDriver_Oracle.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MCUX CLNS
   </div>
   <div id="projectbrief">MCUX Crypto Library Normal Secure</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('a00596.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">mcuxClPsaDriver_Oracle.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>API definition of the PSA driver Oracle.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;crypto.h&gt;</code><br />
<code>#include &lt;<a class="el" href="a00494_source.html">mcuxClKey.h</a>&gt;</code><br />
<code>#include &lt;mcuxClConfig.h&gt;</code><br />
</div>
<p><a href="a00596_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adcfc3eb30f8118b55740824564c6df36"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#adcfc3eb30f8118b55740824564c6df36">mcuxClPsaDriver_Oracle_ExportPublicKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey, uint8_t *data, size_t data_size, size_t *data_length, bool internal_representation)</td></tr>
<tr class="memdesc:adcfc3eb30f8118b55740824564c6df36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for exporting of the public key created in ELS during KEY_GEN command.  <br /></td></tr>
<tr class="separator:adcfc3eb30f8118b55740824564c6df36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad21416927fc67dc0db13e64d44e1f534"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#ad21416927fc67dc0db13e64d44e1f534">mcuxClPsaDriver_Oracle_LoadKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey)</td></tr>
<tr class="memdesc:ad21416927fc67dc0db13e64d44e1f534"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for loading a key.  <br /></td></tr>
<tr class="separator:ad21416927fc67dc0db13e64d44e1f534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1050e1cbae583aa795c783bf9284aa80"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#a1050e1cbae583aa795c783bf9284aa80">mcuxClPsaDriver_Oracle_SuspendKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey)</td></tr>
<tr class="memdesc:a1050e1cbae583aa795c783bf9284aa80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for 'suspending' a key.  <br /></td></tr>
<tr class="separator:a1050e1cbae583aa795c783bf9284aa80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54cc3be0e7de1f066d17482b99944b2"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#ac54cc3be0e7de1f066d17482b99944b2">mcuxClPsaDriver_Oracle_ResumeKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey)</td></tr>
<tr class="memdesc:ac54cc3be0e7de1f066d17482b99944b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for 'resuming' a previously 'suspended' key.  <br /></td></tr>
<tr class="separator:ac54cc3be0e7de1f066d17482b99944b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aace3937de694abfb7334358892c4f6"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#a8aace3937de694abfb7334358892c4f6">mcuxClPsaDriver_Oracle_UnloadKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey)</td></tr>
<tr class="memdesc:a8aace3937de694abfb7334358892c4f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for 'unloading' a previously loaded key.  <br /></td></tr>
<tr class="separator:a8aace3937de694abfb7334358892c4f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12c6d141521eec4788e47fe7d804994"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#ae12c6d141521eec4788e47fe7d804994">mcuxClPsaDriver_Oracle_ReserveKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey)</td></tr>
<tr class="memdesc:ae12c6d141521eec4788e47fe7d804994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for allocating storage for a key that will be created by the psa driver.  <br /></td></tr>
<tr class="separator:ae12c6d141521eec4788e47fe7d804994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ade92ad6a6c35191bcbbdf58d4dd186"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#a6ade92ad6a6c35191bcbbdf58d4dd186">mcuxClPsaDriver_Oracle_StoreKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey)</td></tr>
<tr class="memdesc:a6ade92ad6a6c35191bcbbdf58d4dd186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for saving a key.  <br /></td></tr>
<tr class="separator:a6ade92ad6a6c35191bcbbdf58d4dd186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa70e529f7af52dcd338e12863342c397"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#aa70e529f7af52dcd338e12863342c397">mcuxClPsaDriver_Oracle_ImportKey</a> (<a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *pKey, const uint8_t *data, size_t data_length, size_t *key_buffer_length, size_t *bits)</td></tr>
<tr class="memdesc:aa70e529f7af52dcd338e12863342c397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for executing S50 specific activities when the import of key is done the PSA library will proceed with storing the key.  <br /></td></tr>
<tr class="separator:aa70e529f7af52dcd338e12863342c397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1638efe4265ebc5a46eb4514cbec4b2f"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#a1638efe4265ebc5a46eb4514cbec4b2f">mcuxClPsaDriver_Oracle_GetKeyBufferSizeFromKeyData</a> (const psa_key_attributes_t *attributes, const uint8_t *data, size_t data_length, size_t *key_buffer_length)</td></tr>
<tr class="memdesc:a1638efe4265ebc5a46eb4514cbec4b2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for determine the size required for a key buffer from the data supplied when importing a key.  <br /></td></tr>
<tr class="separator:a1638efe4265ebc5a46eb4514cbec4b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a46af82599a799db12b9207968c2faf"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#a0a46af82599a799db12b9207968c2faf">mcuxClPsaDriver_Oracle_GetBuiltinKeyBufferSize</a> (mbedtls_svc_key_id_t key_id, size_t *key_buffer_size)</td></tr>
<tr class="memdesc:a0a46af82599a799db12b9207968c2faf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for making keys that are installed upon boot in S50 and keys derived from those (built-in) available to be used with PSA API.  <br /></td></tr>
<tr class="separator:a0a46af82599a799db12b9207968c2faf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec7ace9faf5db20fdd142afd5d514f36"><td class="memItemLeft" align="right" valign="top">psa_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00596.html#aec7ace9faf5db20fdd142afd5d514f36">mcuxClPsaDriver_Oracle_GetBuiltinKeyBuffer</a> (psa_key_attributes_t *attributes, uint8_t *key_buffer, size_t key_buffer_size, size_t *key_buffer_length)</td></tr>
<tr class="memdesc:aec7ace9faf5db20fdd142afd5d514f36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oracle function for making keys that are installed upon boot in S50 and keys derived from those (built-in) available to be used with PSA API.  <br /></td></tr>
<tr class="separator:aec7ace9faf5db20fdd142afd5d514f36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>API definition of the PSA driver Oracle. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="adcfc3eb30f8118b55740824564c6df36" name="adcfc3eb30f8118b55740824564c6df36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcfc3eb30f8118b55740824564c6df36">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_ExportPublicKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_ExportPublicKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>internal_representation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for exporting of the public key created in ELS during KEY_GEN command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pKey</td><td>is the reference to the key descriptor of the ELS </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>is the buffer including the exported public key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_size</td><td>is the size of the allocated memory for the data buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data_length</td><td>is the lenght of the exported key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">internal_representation</td><td>is the flag to indicate internal representation</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_DOES_NOT_EXIST</td><td>No key with the associated key_id found in ELS </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad21416927fc67dc0db13e64d44e1f534" name="ad21416927fc67dc0db13e64d44e1f534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad21416927fc67dc0db13e64d44e1f534">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_LoadKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_LoadKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for loading a key. </p>
<p>This function loads an encoded or internal key to memory or the S50 key store.</p>
<p>PRECONDITION: The fields of <code>pKey</code> are initialized as follows:</p><ul>
<li>container.pData : points to the psa key buffer (key_buffer)</li>
<li>container.length : set to the length of the psa key buffer (key_buffer_size)</li>
<li>container.used : set to the length of the psa key buffer (key_buffer_size)</li>
<li>container.pAuxData : points to the psa attributes (attributes) All other fields can be uninitialized</li>
</ul>
<p>POSTCONDITION: In case the key is loaded into memory the fields of <code>pKey</code> are initialized as follows:</p><ul>
<li>location.pData : points to the memory location where the key is loaded, this memory is allocated by the Oracle</li>
<li>location.length : the length of the key that was loaded to memory; i.e. the buffer length</li>
<li>location.slot : does not matter, suggest using 0xFFFFFFu</li>
<li>location.status : MCUXCLKEY_LOADSTATUS_MEMORY In case the key is loaded into an S50 key slot the fields of <code>pKey</code> are initialized as follows:</li>
<li>location.pData : does not matter, suggest NULL</li>
<li>location.length : the length of the key that was loaded to the S50 key slot</li>
<li>location.slot : the S50 key slot to which the key was loaded</li>
<li>location.status : MCUXCLKEY_LOADSTATUS_COPRO</li>
</ul>
<p>OPERATION: Depending on the location attribute in the psa attributes, the Oracle allocates a memory location or free key slot in the S50 (the Oracle is responsible for the memory management) and loads the key there. How the location attributes map to endoding or derivation methods is entirely up to the design of the Oracle; e.g. a key could be decrypted from a blob or derived from a master key.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The Oracle shall never return this error code </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed (other error codes can be used as well if more specific) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1050e1cbae583aa795c783bf9284aa80" name="a1050e1cbae583aa795c783bf9284aa80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1050e1cbae583aa795c783bf9284aa80">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_SuspendKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_SuspendKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for 'suspending' a key. </p>
<p>This function indicates to the Oracle that the key will temporarily not be used by the psa driver. This allows the Oracle to perform memory management operations on this key.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The Oracle shall never return this error code </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed (other error codes can be used as well if more specific) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac54cc3be0e7de1f066d17482b99944b2" name="ac54cc3be0e7de1f066d17482b99944b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac54cc3be0e7de1f066d17482b99944b2">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_ResumeKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_ResumeKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for 'resuming' a previously 'suspended' key. </p>
<p>This function indicates to the Oracle that the key will be used agian by the psa driver. The Oracle should assure it is available again and may therefore need to re-allocate, re-load the key and update the key fields.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The Oracle shall never return this error code </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed (other error codes can be used as well if more specific) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8aace3937de694abfb7334358892c4f6" name="a8aace3937de694abfb7334358892c4f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aace3937de694abfb7334358892c4f6">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_UnloadKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_UnloadKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for 'unloading' a previously loaded key. </p>
<p>This function indicates to the Oracle that the key will not be used any more by the psa driver. This allows the Oracle to free the allocated storage for this key.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The Oracle shall never return this error code </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed (other error codes can be used as well if more specific) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae12c6d141521eec4788e47fe7d804994" name="ae12c6d141521eec4788e47fe7d804994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae12c6d141521eec4788e47fe7d804994">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_ReserveKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_ReserveKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for allocating storage for a key that will be created by the psa driver. </p>
<p>This function requests storage space from the Oracle for a key that will be created by the psa driver. The Oracle shall allocate memory space or a key slot capable of holding the to be generated key.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The Oracle shall never return this error code </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed (other error codes can be used as well if more specific) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ade92ad6a6c35191bcbbdf58d4dd186" name="a6ade92ad6a6c35191bcbbdf58d4dd186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ade92ad6a6c35191bcbbdf58d4dd186">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_StoreKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_StoreKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for saving a key. </p>
<p>This function saves a key from memory or the S50 key store to an encoded format (blob).</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The Oracle shall never return this error code </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed (other error codes can be used as well if more specific) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa70e529f7af52dcd338e12863342c397" name="aa70e529f7af52dcd338e12863342c397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70e529f7af52dcd338e12863342c397">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_ImportKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_ImportKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00864.html#ga1b7557c7a8892e65d43b90f8d6226d6a">mcuxClKey_Descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>pKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>key_buffer_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for executing S50 specific activities when the import of key is done the PSA library will proceed with storing the key. </p>
<p>After the evaluation the function will generate the buffer which will be stored in the memory by the PSA</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">attributes</td><td>defines the attributes associated with the input buffer PRECONDITION: The fields of pKey are initialized as follows:<ul>
<li>container.pData : points to the psa key buffer (key_buffer)</li>
<li>container.length : set to the length of the psa key buffer (key_buffer_size)</li>
<li>container.used : set to the length of the psa key buffer (key_buffer_size)</li>
<li>container.pAuxData : points to the psa attributes (attributes) All other fields shall be initialized</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pKey</td><td>is the reference to the key descriptor of the ELS </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>is the buffer including public key for import </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_length</td><td>is the length of data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">key_buffer_length</td><td>is the effective number of data filled in the key_buffer returned by the function </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bits</td><td>is the number of bits representing the key (e.g. 256 for the NISTP 256 key)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The lifetime is not supported, meaning that fallback functions will be executed by Oracle </td></tr>
    <tr><td class="paramname">PSA_ERROR_INSUFFICIENT_MEMORY</td><td>The key_buffer size is not enough to include data to be stored </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1638efe4265ebc5a46eb4514cbec4b2f" name="a1638efe4265ebc5a46eb4514cbec4b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1638efe4265ebc5a46eb4514cbec4b2f">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_GetKeyBufferSizeFromKeyData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_GetKeyBufferSizeFromKeyData </td>
          <td>(</td>
          <td class="paramtype">const psa_key_attributes_t *&#160;</td>
          <td class="paramname"><em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>key_buffer_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for determine the size required for a key buffer from the data supplied when importing a key. </p>
<p>The size of the data required to store a key is not necessarily the same as the size of the date supplied when importing a key. In particular for key recipes, the recipe gets parsed upon import and stored in an internal representation which consumes a different amount of space.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">attributes</td><td>defines the attributes associated with the input buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>includes the input buffer as passed to the psa import function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_length</td><td>is the length of data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">key_buffer</td><td>is the buffer which will be stored by PSA in the memory </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">key_buffer_length</td><td>is the required number of bytes required as key_buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation was succesful </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The lifetime is not supported, meaning that fallback functions will be executed by Oracle </td></tr>
    <tr><td class="paramname">PSA_ERROR_INSUFFICIENT_MEMORY</td><td>The key_buffer size is not enough to include data to be stored </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a46af82599a799db12b9207968c2faf" name="a0a46af82599a799db12b9207968c2faf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a46af82599a799db12b9207968c2faf">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_GetBuiltinKeyBufferSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_GetBuiltinKeyBufferSize </td>
          <td>(</td>
          <td class="paramtype">mbedtls_svc_key_id_t&#160;</td>
          <td class="paramname"><em>key_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>key_buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for making keys that are installed upon boot in S50 and keys derived from those (built-in) available to be used with PSA API. </p>
<p>PSA does store information about such keys (either the S50 slot number or a derivation recipe). Therefore it needs to know the size to reserve for a particular key.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key_id</td><td>the PSA key id of a built-in key </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">key_buffer_size</td><td>the required size of the buffer to store a built-in key </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aec7ace9faf5db20fdd142afd5d514f36" name="aec7ace9faf5db20fdd142afd5d514f36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec7ace9faf5db20fdd142afd5d514f36">&#9670;&#160;</a></span>mcuxClPsaDriver_Oracle_GetBuiltinKeyBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psa_status_t mcuxClPsaDriver_Oracle_GetBuiltinKeyBuffer </td>
          <td>(</td>
          <td class="paramtype">psa_key_attributes_t *&#160;</td>
          <td class="paramname"><em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>key_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>key_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>key_buffer_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oracle function for making keys that are installed upon boot in S50 and keys derived from those (built-in) available to be used with PSA API. </p>
<p>PSA does store information about such keys (either the S50 slot number or a derivation recipe). This function fills the PSA owned buffer with the required information to use the key.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">attributes</td><td>defines the attributes associated with the input buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">key_buffer</td><td>is the buffer which will be stored by PSA in the memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_buffer_size</td><td>is the size of the allocated </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">key_buffer_length</td><td>is the effective number of data filled in the key_buffer by the function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00596.html">mcuxClPsaDriver_Oracle.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
